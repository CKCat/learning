
在[之前的文章]((https://hex-rays.com/blog/igors-tip-of-the-week-174-ida-database-idbdetails/))中我们提到过，IDB（IDA Database，IDA 数据库文件）实际上由若干嵌入文件（embedded files）组成，这些文件存放着数据库的实际数据，IDA 在处理数据库时会直接对它们进行读写操作。

默认情况下，这些嵌入文件会被解包（unpack）到与 IDB 文件相同的目录下。 这种默认行为可能带来一些问题，例如：

- 磁盘占用过大（尤其是大型 IDB）
- 访问速度下降（例如当 IDB 位于远程网络驱动器或可移动存储设备上时）

如果你经常处理存放在外部介质上的 IDB，但本地有一块高速硬盘（如 NVMe SSD），那么配置一个工作目录（work directory）会非常有帮助。

IDA 的配置文件 `ida.cfg` 中提到了这个选项。

![](assets/2024/02/workdir1.png)

不过，不建议直接修改 `ida.cfg`，而是推荐将修改过的配置变量放到用户配置文件 `idauser.cfg` 中（位于 IDA 的[用户目录](https://hex-rays.com/blog/igors-tip-of-the-week-33-idas-user-directory-idausr/)下）。

这样做的好处是：

- 升级 IDA 时不会覆盖你的自定义设置
- 方便集中管理个性化配置

你还可以在 idauser.cfg 中放置其他个性化设置，例如[可跳过指令](https://hex-rays.com/blog/igors-tip-of-the-week-68-skippable-instructions/)（skippable instructions）的配色方案。

![](assets/2024/02/workdir2.png)

一旦添加了该配置项，IDA 在打开新的 IDB 时，会将其中的嵌入文件解包到你指定的工作目录，而不是放在 IDB 文件所在的目录。

这种方式在以下场景尤其有用：

IDB 位于远程共享或可移动硬盘：即使设备断开连接，本地的工作目录中依然保留了解包文件，IDA 仍然可以继续正常工作。

另请参见：

[Igor’s Tip of the Week #174: IDA database (IDB) details](https://hex-rays.com/blog/igors-tip-of-the-week-174-ida-database-idbdetails/)

[Igor’s tip of the week #33: IDA’s user directory (IDAUSR)](https://hex-rays.com/blog/igors-tip-of-the-week-33-idas-user-directory-idausr/)

[IDA Help: Configuration files](https://hex-rays.com//products/ida/support/idadoc/419.shtml)
