脚本化可以让你在 IDA 中自动化一些重复性或耗时的任务。 之前我们介绍过如何在[批处理](<(https://www.hex-rays.com/blog/igor-tip-of-the-week-08-batch-mode-under-the-hood/)>)（无界面）模式下运行脚本，那么在交互模式下该怎么用呢？

### 脚本片段（Script snippets）

菜单：`File > Script Command…`（快捷键：`Shift + F2`）

![](assets/2021/03/script_snippet.png)

这个对话框主要用于快速原型开发和与当前数据库相关的脚本片段。你可以通过 `Export` 和 `Import` 按钮从外部文件保存或加载脚本。提供了基本的语法高亮，但不能替代完整的 IDE。

一个实用功能是：即使焦点在其他窗口，也可以用 `Ctrl + Shift + X`（动作名：`SnippetsRunCurrent`）执行当前选中的脚本片段。

### 命令行界面（CLI）

IDA 界面底部的输入行可用于执行 IDC 或 Python 的单行表达式（点击按钮可切换解释器）。

![](assets/2021/03/script_cli.png)

特点：

- 适合小任务，大任务会比较笨拙。
- 输入表达式的结果会打印在 `Output Window`（除非以分号结尾抑制输出）。
- 对于 IDC，数值会以多种进制显示，对象会递归地美化打印。
- 支持有限的 `Tab` 补全。

### 运行脚本文件

如果你已经有一个独立的脚本文件，只想直接运行它： 菜单：`File > Script file…`（快捷键：`Alt + F7`）

支持 IDC 和 Python 脚本。这是最快捷的运行方式。

### 最近脚本

通过 `Script file…` 命令运行过的脚本会被 IDA 记住：

可通过 `View > Recent script`s（`或 Alt + F9`）再次运行。

运行前可调用外部编辑器（在 `Options > General…` 的 `Misc` 标签中配置）编辑脚本。

![](assets/2021/03/script_recent.png)

### 示例脚本

IDA 自带了一些示例脚本：

- IDC 示例在 idc 目录
- IDAPython 示例在 `python/examples` 目录 此外，下载区还有一些用户贡献的脚本。

原文地址：https://hex-rays.com/blog/igors-tip-of-the-week-32-running-scripts
