延续[上周的内容](<(https://www.hex-rays.com/blog/igors-tip-of-the-week-25-disassembly-options/)>)，这次我们继续讨论一些你可能想调整的反汇编显示选项。

![](assets/2021/02/disopt_text.png)

### 反汇编行的组成部分

![](assets/2021/02/disasm_parts_dialog-v2.png)

这一组选项控制反汇编“主行”中显示的内容。 启用所有选项后，一行可能包含以下部分：

1. 行前缀：该行的地址。
2. 栈指针值或偏移量：相对于入口点的栈指针变化。
   - 在调试 `sp-analysis failed`（栈指针分析失败）、`positive sp value detected`（检测到正的 `sp` 值）、`call analysis failed`（调用分析失败）等问题时很有帮助。
3. 操作码字节：显示指令对应的机器码。
   - `Number of opcode bytes` 控制每行最多显示多少字节。
   - 如果指令更长，剩余字节会显示在下一行。
   - 如果输入负数（例如 -4），则会截断，只显示最多 4 个字节。
4. 指令注释：显示简短的指令说明（并非所有处理器或指令都支持）。

![](assets/2021/02/disasm_parts2-v2.png)

### 反汇编行的显示

![](assets/2021/02/disasm_lines_dialog-v2.png)

这一组选项控制除主行之外的额外显示内容：

1. 空行：在函数之间或标签前插入额外空行，使反汇编更易读。关闭后可在屏幕上显示更多代码。
2. 数据/代码边界：在执行流中断处（如无条件跳转或调用不返回的函数后）显示分隔线 `;------------`。
3. 基本块边界：在每个基本块结束处（如调用或分支后）额外添加一行空行。
4. 源代码行号：如果数据库中有调试信息（如 DWARF），则显示源文件名和行号。
5. 异常处理块信息：显示从二进制异常处理元数据中解析出的异常处理信息。

![](assets/2021/02/disasm_parts_lines_all-v2.png)

👉 总结： IDA 的反汇编选项不仅能控制指令行的细节（地址、栈指针、操作码字节、注释），还可以调整整体布局（空行、边界、源代码行号、异常处理信息）。合理配置这些选项，可以让反汇编结果更清晰，或在调试特定问题时提供额外帮助。

原文地址：https://hex-rays.com/blog/igors-tip-of-the-week-26-disassembly-options-2
