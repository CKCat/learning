Although IDA has been created first and foremost to analyze binaries in â€œblack boxâ€ mode, i.e. without any symbols or debugÂ  information, it does have the ability to [consume such information when available](https://hex-rays.com/blog/igors-tip-of-the-week-55-using-debug-symbols/).  
è™½ç„¶ IDA é¦–å…ˆæ˜¯ç”¨äºåœ¨ "é»‘ç›’ "æ¨¡å¼ä¸‹åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå³ä¸åŒ…å«ä»»ä½•ç¬¦å·æˆ–è°ƒè¯•ä¿¡æ¯ï¼Œä½†å®ƒç¡®å®æœ‰èƒ½åŠ›åœ¨å¯ç”¨æ—¶ä½¿ç”¨æ­¤ç±»ä¿¡æ¯ã€‚

The debugger functionality was also initially optimized to debug binaries on the assembly level, but nowadays can work with source code too.  
è°ƒè¯•å™¨çš„åŠŸèƒ½æœ€åˆä¹Ÿæ˜¯ä¸ºåœ¨æ±‡ç¼–çº§è°ƒè¯•äºŒè¿›åˆ¶æ–‡ä»¶è€Œä¼˜åŒ–çš„ï¼Œä½†å¦‚ä»Šä¹Ÿå¯ä»¥åœ¨æºä»£ç ä¸­ä½¿ç”¨ã€‚

### Source-level debuggingÂ æºä»£ç çº§è°ƒè¯•

Source-level debugging is enabled by default but can be turned off or on manually via Debugger > Use source-level debugging menu item, or the button on the Debug toolbar.  
æºä»£ç çº§è°ƒè¯•é»˜è®¤ä¸ºå¯ç”¨ï¼Œä½†å¯é€šè¿‡è°ƒè¯•å™¨ > ä½¿ç”¨æºä»£ç çº§è°ƒè¯•èœå•é¡¹æˆ–è°ƒè¯•å·¥å…·æ ä¸Šçš„æŒ‰é’®æ‰‹åŠ¨å…³é—­æˆ–æ‰“å¼€ã€‚

![](assets/2022/04/srcdbg_toolbar.png)

If the input file has debugging info in the format supported by IDA (e.g. PDB or DWARF), it will be automatically used when the debugging starts and the code being executed is covered by the debug info.  
å¦‚æœè¾“å…¥æ–‡ä»¶ä¸­åŒ…å« IDA æ”¯æŒæ ¼å¼çš„è°ƒè¯•ä¿¡æ¯ï¼ˆå¦‚ PDB æˆ– DWARFï¼‰ï¼Œåˆ™åœ¨è°ƒè¯•å¼€å§‹ä¸”è°ƒè¯•ä¿¡æ¯æ¶µç›–æ­£åœ¨æ‰§è¡Œçš„ä»£ç æ—¶ï¼Œå°†è‡ªåŠ¨ä½¿ç”¨è¯¥è°ƒè¯•ä¿¡æ¯ã€‚

![](assets/2022/04/srcdbg_log.png)

### Source code filesÂ æºä»£ç æ–‡ä»¶

If source files are present in the original locations, IDA will open them in separate source view windows and highlight the currently executing line. The assembly instructions are still shown in the IDA View, and you can continue to use it for analysis independently of source code view. Note that IDA may automatically switch to disassembly when stepping through instructions which do not have a correspondence in the source code (for example, compiler helper functions, or auxiliary code such as prolog or epilog instructions).  
å¦‚æœæºä»£ç æ–‡ä»¶å­˜åœ¨äºåŸå§‹ä½ç½®ï¼ŒIDA å°†åœ¨å•ç‹¬çš„æºä»£ç è§†å›¾çª—å£ä¸­æ‰“å¼€å®ƒä»¬ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„è¡Œã€‚æ±‡ç¼–æŒ‡ä»¤ä»æ˜¾ç¤ºåœ¨ IDA è§†å›¾ä¸­ï¼Œæ‚¨å¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒè¿›è¡Œåˆ†æï¼Œè€Œä¸å—æºä»£ç è§†å›¾çš„å½±å“ã€‚è¯·æ³¨æ„ï¼Œå½“æ­¥è¿›åˆ°åœ¨æºä»£ç ä¸­æ²¡æœ‰å¯¹åº”å…³ç³»çš„æŒ‡ä»¤ï¼ˆä¾‹å¦‚ç¼–è¯‘å™¨è¾…åŠ©å‡½æ•°æˆ–è¾…åŠ©ä»£ç ï¼Œå¦‚ prolog æˆ– epilog æŒ‡ä»¤ï¼‰æ—¶ï¼ŒIDA å¯èƒ½ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°åæ±‡ç¼–ã€‚

![](assets/2022/04/srcdbg1.png)

When, after stepping through disassembly, the execution returns to the area covered by the source code, you can ask IDA to show the corresponding source code again via the action DebuggerÂ  > Switch to source (also available in context menu and toolbar). This action can be used even for code away from the current execution point.  
é€šè¿‡åæ±‡ç¼–æ­¥è¿›åï¼Œå½“æ‰§è¡Œè¿”å›åˆ°æºä»£ç è¦†ç›–çš„åŒºåŸŸæ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒè¯•å™¨ > åˆ‡æ¢åˆ°æºä»£ç ï¼ˆä¹Ÿå¯åœ¨ä¸Šä¸‹æ–‡èœå•å’Œå·¥å…·æ ä¸­ä½¿ç”¨ï¼‰è¦æ±‚ IDA é‡æ–°æ˜¾ç¤ºç›¸åº”çš„æºä»£ç ã€‚è¯¥æ“ä½œç”šè‡³å¯ç”¨äºè¿œç¦»å½“å‰æ‰§è¡Œç‚¹çš„ä»£ç ã€‚

![](assets/2022/04/srcdbg2.png)

### Source path mappingsÂ æºä»£ç è·¯å¾„æ˜ å°„

Sometimes the source code corresponding to the binary may be available but in a different location from what is recorded in the debug info (e.g. you may be debugging the binary on a different machine or even remotely from a different OS). The files which were not found in expected location are printed in Output window:  
æœ‰æ—¶ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å¯¹åº”çš„æºä»£ç å¯èƒ½æ˜¯å¯ç”¨çš„ï¼Œä½†ä¸è°ƒè¯•ä¿¡æ¯ä¸­è®°å½•çš„ä½ç½®ä¸åŒï¼ˆä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½åœ¨ä¸åŒçš„æœºå™¨ä¸Šç”šè‡³ä»ä¸åŒçš„æ“ä½œç³»ç»Ÿè¿œç¨‹è°ƒè¯•äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚æœªåœ¨é¢„æœŸä½ç½®æ‰¾åˆ°çš„æ–‡ä»¶å°†æ‰“å°åœ¨è¾“å‡ºçª—å£ä¸­ï¼š

![](assets/2022/04/srcdbg_notfound.png)

Using Options > Source pathsâ€¦, you can set up mappings for IDA to find the source files in new locations.  
ä½¿ç”¨ "é€‰é¡¹">"æºè·¯å¾„..."ï¼Œå¯ä»¥è®¾ç½® IDA åœ¨æ–°ä½ç½®æŸ¥æ‰¾æºæ–‡ä»¶çš„æ˜ å°„ã€‚

![](assets/2022/04/srcdbg_paths.png)

### LocalsÂ Â å±€éƒ¨å˜é‡

When the debug info includes information about local variables, IDA can use it to show their values. A short, one-line version is shown when you hover mouse over the variables in source code view.  
å½“è°ƒè¯•ä¿¡æ¯åŒ…æ‹¬æœ‰å…³å±€éƒ¨å˜é‡çš„ä¿¡æ¯æ—¶ï¼ŒIDA å¯ä»¥ä½¿ç”¨å®ƒæ¥æ˜¾ç¤ºè¿™äº›å˜é‡çš„å€¼ã€‚åœ¨æºä»£ç è§†å›¾ä¸­å°†é¼ æ ‡æ‚¬åœåœ¨å˜é‡ä¸Šæ—¶ï¼Œä¼šæ˜¾ç¤ºç®€çŸ­çš„å•è¡Œç‰ˆæœ¬ã€‚

![](assets/2022/04/srcdbg_hint.png)

For more complex objects it may be more convenient to open the dedicated view where you can expand and inspect fields and sub-objects. This view is available via the menu DebuggerÂ  > Debugger windows > Locals.  
å¯¹äºæ›´å¤æ‚çš„å¯¹è±¡ï¼Œæ‰“å¼€ä¸“ç”¨è§†å›¾å¯èƒ½æ›´æ–¹ä¾¿ï¼Œåœ¨æ­¤å¯ä»¥å±•å¼€å¹¶æ£€æŸ¥å­—æ®µå’Œå­å¯¹è±¡ã€‚è¯¥è§†å›¾å¯é€šè¿‡èœå• "è°ƒè¯•å™¨">"è°ƒè¯•å™¨çª—å£">"æœ¬åœ° "æŸ¥çœ‹ã€‚

![](assets/2022/04/srcdbg_locals.png)

### WatchesÂ è§‚å¯Ÿ

In addition to locals, you can also watch only specific variables you need instead of all locals, or values of global variables. This view can be opened via DebuggerÂ  > Debugger windows > Watch view. Variables can be added using Ins or context menu.  
é™¤æœ¬åœ°å˜é‡å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åªè§‚å¯Ÿæ‚¨éœ€è¦çš„ç‰¹å®šå˜é‡ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æœ¬åœ°å˜é‡æˆ–å…¨å±€å˜é‡çš„å€¼ã€‚å¯ä»¥é€šè¿‡è°ƒè¯•å™¨ > è°ƒè¯•å™¨çª—å£ > ç›‘è§†è§†å›¾æ‰“å¼€è¯¥è§†å›¾ã€‚å¯ä»¥ä½¿ç”¨ Ins æˆ–ä¸Šä¸‹æ–‡èœå•æ·»åŠ å˜é‡ã€‚

![](assets/2022/04/srcdbg_watches.png)

### Debugging pseudocodeÂ è°ƒè¯•ä¼ªä»£ç 

Even if you donâ€™t have debug info for the code youâ€™re debugging but do have a decompiler, it is possible to debug pseudocode as if it were a source file. IDA will automatically use pseudocode if source-level debugging is enabled but there is no debug info for the specific code fragment youâ€™re stepping through. You can also always switch to pseudocode during debugging using the usual Tab hotkey. Locals, Watches, and source-level breakpoints are available when debugging pseudocode in the same way as with â€œrealâ€ source code.  
å³ä½¿æ²¡æœ‰è°ƒè¯•ä»£ç çš„è°ƒè¯•ä¿¡æ¯ï¼Œä½†æœ‰åç¼–è¯‘å™¨ï¼Œä¹Ÿå¯ä»¥åƒè°ƒè¯•æºæ–‡ä»¶ä¸€æ ·è°ƒè¯•ä¼ªä»£ç ã€‚å¦‚æœå¯ç”¨äº†æºä»£ç çº§è°ƒè¯•ï¼Œä½†æ²¡æœ‰æ­£åœ¨è°ƒè¯•çš„ç‰¹å®šä»£ç ç‰‡æ®µçš„è°ƒè¯•ä¿¡æ¯ï¼ŒIDA å°†è‡ªåŠ¨ä½¿ç”¨ä¼ªä»£ç ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ä½¿ç”¨å¸¸ç”¨çš„ Tab çƒ­é”®åˆ‡æ¢åˆ°ä¼ªä»£ç ã€‚åœ¨è°ƒè¯•ä¼ªä»£ç æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸è°ƒè¯• "çœŸå® "æºä»£ç ç›¸åŒçš„æœ¬åœ°ã€ç›‘è§†å’Œæºä»£ç çº§æ–­ç‚¹ã€‚

![](assets/2022/04/srcdbg_pseudocode.png)

P.S. attentive reader may discover an additional surprise in this post. Happy Easter! ğŸ˜‰  
é™„æ³¨ï¼šç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šåœ¨è¿™ç¯‡æ–‡ç« ä¸­å‘ç°ä¸€ä¸ªé¢å¤–çš„æƒŠå–œã€‚å¤æ´»èŠ‚å¿«ä¹ï¼ ğŸ˜‰