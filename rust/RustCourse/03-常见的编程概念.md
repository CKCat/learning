## 变量和可变性

Rust 变量默认是不可改变的。但是可以在变量名前添加 `mut` 来使其可变。

### 常量

常量不光默认不可变，它总是不可变。声明常量使用 `const` 关键字而不是 `let`，并且必须注明值的类型。

### 隐藏

可以定义一个与之前变量同名的新变量。称之为第一个变量被第二个隐藏。可以用相同变量名称来隐藏一个变量，以及重复使用 `let` 关键字来多次隐藏。

## 数据类型

### 标量类型

标量类型代表一个单独的值。Rust 有四种基本的标量类型：整型、浮点型、布尔类型和字符类型。

整数 是一个没有小数部分的数字。

| 长度    | 有符号 | 无符号 |
| ------- | ------ | ------ |
| 8-bit   | i8     | u8     |
| 16-bit  | i16    | u16    |
| 32-bit  | i32    | u32    |
| 64-bit  | i64    | u64    |
| 128-bit | i128   | u128   |
| arch    | isize  | usize  |

Rust 的浮点数类型是 `f32` 和 `f64`，分别占 32 位和 64 位，浮点数采用 IEEE-754 标准表示。

Rust 中的布尔类型使用 `bool` 表示，布尔类型有两个可能的值：`true` 和 `false`。

Rust 的 `char` 类型是语言中最原生的字母类型。**Rust 的 `char` 类型的大小为四个字节，并代表了一个 Unicode 标量值。**

### 复合类型

复合类型可以将多个值组合成一个类型。Rust 有两个原生的复合类型：元组和数组。

#### 元组

元组是一个将多个其他类型的值组合进一个复合类型的主要方式。元组长度固定：一旦声明，其长度不会增大或缩小。

元组可以使用解构和索引的方式访问其元素。

不带任何值的元组有个特殊的名称，叫做单元元组。这种值以及对应的类型都写作 `()`，表示空值或空的返回类型。如果表达式不返回任何其他值，则会隐式返回单元值。

#### 数组

数组中的每个元素的类型必须相同，Rust 中的数组与一些其他语言中的数组不同，Rust 中的数组长度是固定的。

数组可以使用索引来访问其元素，如果索引超出了数组长度，Rust 会 panic，这是 Rust 术语，它用于程序因为错误而退出的情况。

## 函数

Rust 代码中的函数和变量名使用 snake case 规范风格。在 snake case 中，所有字母都是小写并使用下划线分隔单词。

通过输入 `fn` 后面跟着函数名和一对圆括号来定义函数。在函数签名中，必须声明每个参数的类型。

Rust 函数返回值在箭头（`->`）后声明它的类型，可以使用 `return` 关键字和指定值从函数中提前返回；**但大部分函数隐式的返回最后的表达式，表达式不能添加分号。**

## 控制流

### if 表达式

语法:

```rust
if exp {
}else if exp{
}else{
}

// 在 let 语句中使用 if
let number = if condition { 5 } else { 6 };
```

### 循环

#### loop 循环

`loop` 关键重复执行代码，除非手动停止或使用 `break` 关键字跳出循环。如果 `break` 后面还有表达式，该表达式的值会返回。

```rust
fn main() {
    let mut counter = 0;
    let result = loop {
        counter += 1;
        if counter == 10 {
            break counter * 2; // 返回值
        }
    };
    println!("The result is {result}");
}
```

还可以在循环上指定一个循环标签，然后将标签与 `break` 或 `continue` 一起使用，使这些关键字应用于已标记的循环。

#### while 条件循环

当条件为 `true`，执行循环。

```rust
    while number != 0 {
        println!("{number}!");
        number -= 1;
    }
```

#### for 循环

可以使用 `for` 循环来对一个集合的每个元素执行一些代码。

```rust
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
    for number in (1..4).rev() {
        println!("{number}!");
    }
```
