# 第一章 环游密码世界

## 密码

Alice 向 Bob 发送邮件的过程中，会经历多台服务器，在这个过程中就有可能被窃取邮件内容；
这时 Alice 可以通过加密邮件内容，然后再发送给 Bob，这样即使邮件内容被窃取，也无法得知邮件的原始内容。

加密之前的消息称为明文（plaintext），加密后的消息称为密文（ciphertext）。

密码只是一定程度上保证了消息机密性，不安全的加密方式往往很容易被破译（cryptanalysis）。

## 对称密码与公钥密码

从明文生成密文的步骤，称为加密算法，解密的步骤则称为解密算法；加密、解密的算法合在一起统称为密码算法。

密码算法中需要密钥（key），无论是加密还是解密，都需要密钥。

对称密码（symmetric cryptography） 是指再加密和解密时使用同一密钥的方式。
公钥密码（public-key cryptography）是指在加密和解密时使用不同密钥的方式；该方式又称非对称密钥。

将对称密码和公钥密码结合起来的密码方式称为混合密码系统（hybird cryptosystem），现在很多加密方式就是使用混合密码系统。

## 其他密码技术

单向散列函数（one-way hash function）是一种保证完整性的密码技术。

消息认证码（message authentication code）是一种能够保证完整性和提供认证的密码技术。

数字签名（digital signature）是一种能够确保完整性、提供认证并防止否认的密码技术。

伪随机数生成器（Pseudo Random Number Generator，PRNG）是一种能够模拟产生随机数列的算法。

隐写术是一种隐藏消息本身（明文）的技术，数字水印就运用了隐写术的方法。通过将密码和隐写术结合，就可以隐藏消息本身和内容（密文）。

## 密码与信息安全常识

- 不要使用保密的密码算法 —— 现在世界上公开被认为强度较高的密码算法，都是经过密码破译者长期尝试破解未果而活下来的。
- 使用低强度的密码比不进行任何加密更危险 —— 低强度的密码会导致用户处理机密信息时麻痹大意。
- 任何密码总有一天都会被破解 —— 只要将所有的密钥都尝试一遍，总有一天可以破译出来。
- 密码只是信息安全的一部分 —— 网络攻击或社会工程学也可以获取密码；最脆弱的环节并不是密码，而是人类自己。

# 第二章 历史上的密码

## 凯撒密码

凯撒密码是一种通过将明文中所使用的字母表按一定的数字平移进行加密的。
凯撒密码的解密过程是使用与加密时相同的密钥进行反向的平移操作。

由于凯撒密码太脆弱了，可以使用暴力破解的方式进行解密，这种破解方式又称为穷举搜索。

使用暴力破解凯撒密码加密的字符串 `PELCGBTENCUL` 。

```python
import string

uppercase_alphabet = list(string.ascii_uppercase)

unkown_str = "PELCGBTENCUL"
for i in range(0, len(uppercase_alphabet)):
    out = ""
    for ch in unkown_str:
        index = ord(ch) - i - ord("A")  # 移位
        out += uppercase_alphabet[index]
    print(out.lower())
```

## 简单替换密码

将明文中所使用的字母表替换为另一套字母表的密码称为简单替换密码。凯撒密码也可以说是简单替换密码的一种。

只要使用加密所使用的替换表进行反向替换，就可以对简单替换密码进行解密了。

一种密码能够使用的多有密钥集合称作密钥空间，所有可用密钥的总数就是密钥空间的大小，密钥空间越大，暴力破解就困难。

使用暴力破解很难破译简单替换密码，但使用被称为频率分析的密码破译方式，就能够破译简单替换密码。

使用频率分析的总结：

- 除了使用高频字母以外，低频字母也能够称为线索。
- 搞清开头和结尾能够称为线索，搞清单词之间的分隔也能成为线索。
- 密文越长越容易破译。
- 同一个字母连续出现能够称为线索。
- 破译的速度会越来越快。

[破密行動: 以不尋常的角度破解 IDA Pro 偽隨機數](https://devco.re/blog/2019/06/21/operation-crack-hacking-IDA-Pro-installer-PRNG-from-an-unusual-way/) 文章中就使用了类似的方式。

